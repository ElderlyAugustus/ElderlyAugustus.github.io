var InstantClick=function(e,t){var a,c,l,p,O,x,C,A,N,P,E=navigator.userAgent,G=E.indexOf(" CriOS/")>-1,F="createTouch"in e,n={},s=!1,h=!1,b=!1,u=!1,k=!1,r={},f=!1,o=!1,w=[],v={fetch:[],receive:[],wait:[],change:[]};function g(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function _(e){for(;e&&e.nodeName!="A";)e=e.parentNode;return e}function Y(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-instant"))return!1;if(e.hasAttribute("data-no-instant"))return!0}while(e=e.parentNode)return!1}function U(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-no-instant"))return!1;if(e.hasAttribute("data-instant"))return!0}while(e=e.parentNode)return!1}function y(e){var n=t.protocol+"//"+t.host;return!(e.target||e.hasAttribute("download")||e.href.indexOf(n+"/")!=0||e.href.indexOf("#")>-1&&g(e.href)==a||(P?!U(e):Y(e)))}function d(e,t,n,s){for(var o,a=!1,i=0;i<v[e].length;i++)e=="receive"?(o=v[e][i](t,n,s),o&&("body"in o&&(n=o.body),"title"in o&&(s=o.title),a=o)):v[e][i](t,n,s);return a}function T(t,n,s,o,i){if(e.documentElement.replaceChild(n,e.body),I(s),o){history.pushState(null,null,o);var c,l=o.indexOf("#"),r=l>-1&&e.getElementById(o.substr(l+1)),u=0;if(r)for(;r.offsetParent;)u+=r.offsetTop,r=r.offsetParent;scrollTo(0,u),a=g(o)}else scrollTo(0,i);G&&e.title==t?e.title=t+String.fromCharCode(160):e.title=t,M(),p.done(),d("change",!1),c=e.createEvent("HTMLEvents"),c.initEvent("instantclick:newpage",!0,!0),dispatchEvent(c)}function z(){f=!1,o=!1}function q(e){return e.replace(/<noscript[\s\S]+<\/noscript>/gi,"")}const K=/stylesheet/;function L(e,t){for(const n of e.children){let s;switch(n.tagName){case"LINK":const e=n.getAttribute("rel")||"";e&&!K.test(e)&&(s=e);break;case"META":const t=n.getAttribute("name")||"",o=n.getAttribute("property")||"";(t||o)&&(s=`${t}-${o}`);break}s&&t(n,`${n.tagName}-${s}`)}}function R(e){const t={};return L(e,(e,n)=>{t[n]=e.outerHTML}),t}function I(t){L(e.head,(e,n)=>{const s=t[n];s&&(e.outerHTML=s)})}function H(e){if(x>+new Date-500)return;var t=_(e.target);if(!t||!y(t))return;m(t.href)}function S(e){if(x>+new Date-500)return;var t=_(e.target);if(!t||!y(t))return;t.addEventListener("mouseout",$),C?(N=t.href,c=setTimeout(m,C)):m(t.href)}function B(e){x=+new Date;var t=_(e.target);if(!t||!y(t))return;O?t.removeEventListener("mousedown",H):t.removeEventListener("mouseover",S),m(t.href)}function V(e){var t=_(e.target);if(!t||!y(t))return;if(e.which>1||e.metaKey||e.ctrlKey)return;e.preventDefault(),D(t.href)}function $(){if(c){clearTimeout(c),c=!1;return}if(!f||o)return;l.abort(),z()}function W(){if(l.readyState<4)return;if(l.status==0)return;if(r.ready=+new Date-r.start,l.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){t=e.implementation.createHTMLDocument(""),t.documentElement.innerHTML=q(l.responseText),h=t.title,u=t.body,k=R(t.head),i=d("receive",s,u,h),i&&("body"in i&&(u=i.body),"title"in i&&(h=i.title)),c=g(s),n[c]={body:u,title:h,head:k,scrollY:c in n?n[c].scrollY:0};for(var t,i,a,c,m,j,p=t.head.children,v=0,f=p.length-1;f>=0;f--)if(a=p[f],a.hasAttribute("data-instant-track")){j=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML;for(m=w.length-1;m>=0;m--)w[m]==j&&v++}v!=w.length&&(b=!0)}else b=!0;o&&(o=!1,D(s))}function M(t){if(e.body.addEventListener("touchstart",B,!0),O?e.body.addEventListener("mousedown",H,!0):e.body.addEventListener("mouseover",S,!0),e.body.addEventListener("click",V,!0),!t){var n,s,o,r,a=e.body.getElementsByTagName("script");for(i=0,j=a.length;i<j;i++){if(n=a[i],n.hasAttribute("data-no-instant"))continue;s=e.createElement("script"),n.src&&(s.src=n.src),n.innerHTML&&(s.innerHTML=n.innerHTML),o=n.parentNode,r=n.nextSibling,o.removeChild(n),o.insertBefore(s,r)}}}function m(e){if(!O&&"display"in r&&+new Date-(r.start+r.display)<100)return;if(c&&(clearTimeout(c),c=!1),e||(e=N),f&&(e==s||o))return;f=!0,o=!1,s=e,u=!1,b=!1,r={start:+new Date},d("fetch"),l.open("GET",e),l.send()}function D(e){if("display"in r||(r.display=+new Date-r.start),c||!f){if(c&&s&&s!=e){t.href=e;return}m(e),p.start(0,!0),d("wait"),o=!0;return}if(o){t.href=e;return}if(b){t.href=s;return}if(!u){p.start(0,!0),d("wait"),o=!0;return}n[a].scrollY=pageYOffset,z(),T(h,u,k,s)}p=function(){var t,n,s,o,i;function u(){t=e.createElement("div"),t.id="instantclick",n=e.createElement("div"),n.id="instantclick-bar",n.className="instantclick-bar",t.appendChild(n);var s,i,c,a=["Webkit","Moz","O"];if(o="transform",!(o in n.style))for(s=0;s<3;s++)a[s]+"Transform"in n.style&&(o=a[s]+"Transform");if(i="transition",!(i in n.style))for(s=0;s<3;s++)a[s]+"Transition"in n.style&&(i="-"+a[s].toLowerCase()+"-"+i);c=e.createElement("style"),c.innerHTML="#instantclick{position:"+(F?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+i+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+i+":all .25s}",e.head.appendChild(c),F&&(r(),addEventListener("resize",r),addEventListener("scroll",r))}function c(n,o){s=n,e.getElementById(t.id)&&e.body.removeChild(t),t.style.opacity="1",e.getElementById(t.id)&&e.body.removeChild(t),a(),o&&setTimeout(h,0),clearTimeout(i),i=setTimeout(l,500)}function h(){s=10,a()}function l(){s+=1+Math.random()*2,s>=98?s=98:i=setTimeout(l,500),a()}function a(){n.style[o]="translate("+s+"%)",e.getElementById(t.id)||e.body.appendChild(t)}function d(){if(e.getElementById(t.id)){clearTimeout(i),s=100,a(),t.style.opacity="0";return}c(s==100?0:s),setTimeout(d,0)}function r(){t.style.left=pageXOffset+"px",t.style.width=innerWidth+"px",t.style.top=pageYOffset+"px";var e="orientation"in window&&Math.abs(orientation)==90,n=innerWidth/screen[e?"height":"width"]*2;t.style[o]="scaleY("+n+")"}return{init:u,start:c,done:d}}(),A="pushState"in history&&(!E.match("Android")||E.match("Chrome/"))&&t.protocol!="file:";function X(){if(a)return;if(!A){d("change",!0);return}for(var o,i,r,c,s=arguments.length-1;s>=0;s--)o=arguments[s],o===!0?P=!0:o=="mousedown"?O=!0:typeof o=="number"&&(C=o);a=g(t.href),n[a]={body:e.body,title:e.title,head:R(e.head),scrollY:pageYOffset},r=e.head.children;for(s=r.length-1;s>=0;s--)i=r[s],i.hasAttribute("data-instant-track")&&(c=i.getAttribute("href")||i.getAttribute("src")||i.innerHTML,w.push(c));l=new XMLHttpRequest,l.addEventListener("readystatechange",W),M(!0),p.init(),d("change",!0),addEventListener("popstate",function(){var e=g(t.href);if(e==a)return;if(!(e in n)){t.href=t.href;return}n[a].scrollY=pageYOffset,a=e,T(n[e].title,n[e].body,n[e].head,!1,n[e].scrollY)})}function Q(e,t){v[e].push(t)}return{supported:A,init:X,on:Q}}(document,location)